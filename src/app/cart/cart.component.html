<h2>Shopping Cart</h2>

<ul>
    <li *ngFor="let cartItem of cartItems">
        <app-cart-item
            [cartItem]="cartItem"
            [product]="products[cartItem.productId]"
            (remove)="onRemove($event)"
            (change)="onChange($event)">
        </app-cart-item>
    </li>
</ul>

<p>Total: {{ this.productService.formatPrice(totalPrice) }}</p>

<p *ngIf="error == CartError.LOAD_FAIL">There was a problem loading your cart. Please try again later.</p>
<p *ngIf="error == CartError.CLEAR_FAIL">There was a problem clearing your cart. Please try again later.</p>
<p *ngIf="error == CartError.CLEAR_FAIL">There was a problem removing the product from your cart. Please try again later.</p>
<p *ngIf="error == CartError.CHECKOUT_FAIL">There was a problem checking out. Please try again later.</p>

<button (click)="onCheckout()" [disabled]="cartItems.length == 0">Checkout</button>
<button (click)="onRemoveAll()" [disabled]="cartItems.length == 0">Remove all</button>
